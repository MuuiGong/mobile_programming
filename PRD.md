# R² (Risk \& Reward) Android 프로젝트 구축 프롬프트

## 🎯 목적 및 요청 개요

> 당신은 선진 투자교육 시스템 전문가이자, Android 앱 개발에 최적화된 AI 엔지니어입니다.
> 아래의 상세 요구사항을 모두 참고하여, **초보~중수 트레이더를 위한 리스크 감각 트레이닝 모바일 앱(R²)**을 설계 및 구축해 주세요.
> 핵심은 ‘수익’이 아닌, **리스크 관리 역량(위험 감각)과 행동 심리적 습관 개선**을 데이터 기반으로 학습시키는 것입니다.

***

## 🧩 1. 시스템 구성 및 기술 아키텍처

- **플랫폼/언어:** Java / Android SDK
- **아키텍처 패턴:** MVVM (Model–View–ViewModel) 구조 철저 준수
- **DB:** Room(SQLite)
- **네트워크:** Retrofit2 + CoinGecko API(실시간 암호화폐 시세)
- **차트:** TradingView Lightweight Chart (WebView + JS Bridge), MPAndroidChart(리스크/성과 시각화)
- **알림:** NotificationManager(TP/SL 확인/이벤트)
- **빌드툴:** Gradle

***

## ⚡️ 2. 주요 기능 요구 및 설계

### A. 대시보드

- 잔고/누적 손익/트레이드 평균 위험 지수 등 정보 제공
- 주간 리포트(변동성·Sharpe ratio·MDD 차트) 포함


### B. 인터랙티브 차트 기반 가상 트레이딩

- TradingView 차트(WebView)
- 엔트리/익절/손절 라인을 직접 드래그 \& 숫자 입력 지원 (양방향 JS ↔ 안드로이드 브릿지)
- 실시간 TP/SL 변경시 리스크-보상 비율(R:R) 및 리스크스코어 즉시 피드백


### C. 모의 트레이딩 엔진

- 가상 잔고, 매매 기록 자동 저장
- TP/SL 달성시 자동 포지션 종료 및 알림, 손익 기록


### D. 리스크 스코어 계산 \& 시각화

- 실시간 리스크스코어(0–100) 공식:
`score = 100 - (0.4*Volatility + 0.4*MDD + 0.2*negSharpe)`
- Volatility, MDD, Sharpe ratio MPAndroidChart로 시각화
- Probability Cone(확률 분포 시각화), 게이지/히트맵 등 추가


### E. 전략 모의 시뮬레이션(Monte Carlo)

- 현재 R:R값 기준, 100회 가상매매 결과(기대수익, 승률, 최대손실, Sharpe 등) 바/분포 차트로 시각화


### F. 트레이드 기록/저널/리플레이

- 모든 매매 기록(Room DB 연동)
- 거래별 감정 태그/메모 기록(불안/욕심/집중 등)
- 리플레이 모드: 과거 거래 복기, 코치/챌린지 피드백


### G. AI 리스크 코치(패턴 분석 \& 행동 피드백)

- 사용자의 반복적 행동 패턴(손실 회피, 복수 매매, Overtrading 등) 감지 룰/경량 ML 모델
- 맞춤 메시지(“최근 손실 후 거래량이 급증!”), 챌린지 추천 및 진단 알고리즘
- 트레이딩 감정/습관에 기반한 adaptive 미션 제공(ZPD 활용)


### H. 챌린지·학습 미션·뱃지 시스템

- 목표 R:R 달성, 연속 성공 등 일/주 단위 미션 및 보상 제공(뱃지, 랭킹, AI 추천 등)

***

## 📊 3. 데이터 구조 및 흐름

### -  주요 Entity 정의

```plaintext
User: id, 닉네임, 잔고 등
Position: id, 심볼, 수량, 진입/익절/손절, 오픈/클로즈 시점, isClosed
TradeHistory: id, 심볼, 유형(BUY/SELL), 가격, 수량, PnL, 시간
Journal: id, positionId, 감정, 메모, timestamp
Challenge: id, 목표/난이도/달성상태
```


### -  데이터 플로우

- CoinGecko API → Retrofit → ViewModel → 실시간 차트·UI
- ChartBridge (WebView↔JS): 라인변경→가격전달→RiskScore→UI/알림
- Risk Calculator: 실시간 리스크지표 산출, 시각화 및 알림
- DB 거래 이력 및 포지션 상태 반영 (Room/LiveData)
- 행동 패턴 Analytics, AI 코치, 챌린지 추천(사용자별 로컬 맞춤)

***

## 🧠 4. 행동심리·교육이론·UX/시각적 피드백

- **즉각적/감정적 피드백:**
    - 거래 입력 후 “TP가 너무 가까움 — 위험 관리 필요!” 등 즉시 메시지
    - 리스크게이지, Probability Cone, 컬러·진동·알림 등 감각 피드백
- **행동 패턴 감지 및 습관개선:**
    - Loss Aversion/Impulsivity 탐지, 반복행동 교정 메시지
    - 감정저널·거래 리뷰·리플레이 학습(Pyshcology 기반)
- **학습적 적응형(Adaptive) 시스템:**
    - 실력·행동 패턴에 따라 미션/난이도 자동 조정(ZPD 원리 적용)
    - Duolingo/TradingSim식 챌린지/일일 스테릭/랭킹·보상 설계

***

## ⚙️ 5. 구현·운영 계획과 기술적 과제

- MVVM 구조 분리(모듈별 테스트/확장)
- WebView 차트 최적화(JS 처리/버퍼링, 저사양 대응)
- DB 인덱스/조회 최적화, 실거래/AI 분석 보고 등 장기 기록 관리
- 경량 AI: 행동/감정/거래 패턴 분석, 룰→클러스터링 ML(추후 확장)
- 실시간 처리/알림 최적화, 데이터 동기화

***

## 🚀 6. 제출/검증을 위한 기능 요약

- [ ] 모든 핵심 UI 및 차트 실시간 연동
- [ ] 리스크스코어 계산/정규화/직관 피드백
- [ ] Monte Carlo 시뮬레이션/시각화
- [ ] 트레이드 기록/리플레이/감정저널
- [ ] 맞춤 AI 코칭/패턴 감지 피드백
- [ ] 챌린지/일일 미션/뱃지
- [ ] MVVM, DB/네트워크/알림 최적화

***

## 📑 추가 참고 및 가이드라인

- 프로젝트의 모든 핵심 요구를 충족하는 구조와, 실무적 감각·심리적 피드백·UX 퀄리티 반드시 구현
- 개발측에 기술적 한계 혹은 추가 시각화/UI 요구 발생시, 명확히 코드 수준에서 제안·반영 바람
- 행동심리·교육적 근거, AI 코치·챌린지의 실제 작동방식까지 상세 구현, 테스트/리뷰 프로세스 포함 권장

***

> 위 내용을 바탕으로, R² (Risk and Reward) 전체 시스템을 최대한 완성도 높게, 사용자의 행동·심리·리스크 감각을 실제로 개선하는 투자교육 모바일 앱으로 개발해 주세요.

***
